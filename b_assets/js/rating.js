document.addEventListener("DOMContentLoaded",(function(){$(document).ready((function(){let t=$(".rating-wrap .rateit"),a="ph_"+t.data("hash");void 0!==Cookies.get(a)?$.get({url:"/rating/get/"+t.data("hash"),success:function(a){$("#stars5").prop("step",.5).val(a.rate),$(".rating-wrap .rating-votes span").html(a.votes),t.replaceWith('<div id="rated"></div>'),$("#rated").rateit({min:0,max:5,step:.5,resetable:!1,ispreset:!0,readonly:!0,backingfld:"#stars5",mode:"font"}),$(".rating-wrap").show()},dataType:"json"}):$(".rating-wrap").show(),t.bind("rated reset",(function(e){let r=t.rateit("value"),n=$(".rating-votes span");$.post("/rating/"+t.data("type")+"/"+t.data("id"),{url:t.data("url"),value:r},(function(e){t.rateit("readonly",!0),n.html(parseInt(n.html())+1),Cookies.set(a,r,{expires:1,path:"/"})}))}))}))}));